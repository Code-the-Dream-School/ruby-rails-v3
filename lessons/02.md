# Lesson 2
## Creating and updating data with ActiveRecord

| Lesson objectives                            | Course objectives                        |
|:---------------------------------------------|:-----------------------------------------|
| Learn to create and update data with AR      | Use Ruby to implement CRUD               |
| Learn to interpret AR SQL queries and interact with SQL data directly | |

In the last lesson, we collected data from our data set to do various tasks. Now, it's time to set up courses, enrollments and mentor assignments for the next trimester. So we'll learn how to create and update data in Rails using ActiveRecord. We'll also review all the ways data is represented and the purpose for each. Along the way, we'll gain more knowledge and experience with Ruby and object oriented programming. 

### Ruby classes, models & objects
Watch this video that gives an introduction to classes and objects in object oriented languages.

https://youtu.be/kHNhm4UL0Sg?si=hM6X9S_UpEg9Mo6h

Let's map the concepts in the video to what we've seen so far.

Our `Trimester` class is analogous to the `Dog` class in the video, and "Fall 2024" or "Spring 2025" would be analgous to the Jack Russell and German Shepard instances or objects. That is, we would reference them in code as instances of `Trimester`.

We mentioned previously that an ActiveRecord model is a special type of Ruby class. Each AR model corresponds to a database table, and each row in that table can be retrieved as an instance of the model. And for each column of the database table (remember, these are also the columns on our spreadsheet tabs) we have an attribute on the AR model. Similar to an object in Javascript, attributes of an instance are accessible using the dot operator.

Open the rails console and run the following:

```
spring2025 = Trimester.find_by(year: '2025', term: 'Spring')
```

Here we're creating a variable `spring2025` and setting it equal to an instance of `Trimester`. Let's access some attributes:

```
spring2025.year
spring2025.term
spring2025.application_deadline
```

On your own, for practice. Do the same exercise for the Fall 2024 trimester.
1. Create a variable and set it equal to an instance of `Trimester` with term and year Fall and 2024.
2. Access some attributes on that instance with the dot operator.

### Model.create
So far, we've only been reading data from our database. Let's use ActiveRecord to create a new trimester.

In a rails console, type the following and hit enter:

```
Trimester.create
```
Llet's take a look at the output:

```
doc-rails(dev)> Trimester.create(year: '2026', term: 'Spring', application_deadline: '2026-02-15')
  TRANSACTION (0.1ms)  BEGIN immediate TRANSACTION /*application='DocRails'*/
  Trimester Create (3.1ms)  INSERT INTO "trimesters" ("year", "term", "application_deadline", "start_date", "end_date", "created_at", "updated_at") VALUES (NULL, NULL, NULL, NULL, NULL, '2025-01-09 04:29:04.718650', '2025-01-09 04:29:04.718650') RETURNING "id" /*application='DocRails'*/
  TRANSACTION (0.1ms)  COMMIT TRANSACTION /*application='DocRails'*/
=>
#<Trimester:0x000000012ddd2948
 id: 10,
 year: '2026',
 term: 'Spring',
 application_deadline: "2025-01-09",
 start_date: "2026-03-01",
 end_date: "2026-06-30",
 created_at: "2025-01-09 04:29:04.718650000 +0000",
 updated_at: "2025-01-09 04:29:04.718650000 +0000">
doc-rails(dev)>
```
TODO short video explaining transaction, insert statement, attributes of Trimester, etc


### TODO (flesh out) - Introduction to SQL
- download the GUI
- copy the commands from the terminal into SQL, but update some things
- reference cheat sheet, tables, models, files, attributes, columns,

intro videos on SQL
- https://youtu.be/wR0jg0eQsZA?si=lf_0bb8QJtBNQ9vi  (intro to simple relational database, ERD (lucid))
- https://youtu.be/t9qpMYJAbGg?si=lHzpWfriUUuIvHcB (Using SELECT to select records from one table)
- https://youtu.be/37Tyv0k-Byg?si=bI9BpgvgU6HPf0Xo  (insert, delete)
- need a short one for joins
