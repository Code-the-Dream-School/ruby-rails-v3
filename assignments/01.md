## Lesson 1 Assignment 

### Question 1
Suppose we need to send an email to all current students in the Intro course, encouraging them to enroll in a course for the upcoming trimester. Let's get the data we need: 

To get the list of classes for the upcoming trimester:
1. Let's say the upcoming trimester is Fall 2025. What is the trimester id that corresponds to that trimester? (Get this from the `trimesters` tab.)
2. Looking at the `courses` tab, find the rows where `trimester_id` matches the id from question 1. For each of these rows, use the `coding_class_id` to reference the corresponding coding class on the `coding_classes` tab. 
3. For each row from question 2, fill in this template, replacing everything in angle brackets (<>) with the data you found above.

```
<course id>, <coding class name> - <trimester term> <trimester year>
```

Great! Now let's get the list of emails for students currently enrolled in Intro to Programming:
1. On the `enrollments` tab, we see that an enrollment has columns `student_id` and `course_id`.
2. Find the list of students enrolled in the Intro to Programming - Spring 2025 course and fill in the following template for each matching student row:

```
<student id>, <student email>
```

### Question 2
Our next task is to email all the mentors for students in the current (Spring 2025) Intro to Programming course who do not yet have a final grade (on the `enrollments` tab), so that we can remind them to finish grading. You'll want to reference the `mentor_enrollment_assignments` tab and the `mentors` tab in addition to the other tabs you've referenced above. For each mentor, complete the following template:

```
<mentor id>, <mentor email>
```

## Reading data from a database using ActiveRecord
Maybe you can imagine how managing all of the code school's data with a spreadsheet might become unweildy and error prone. Let's start building a web application to manage Dream of Code's data. Some of our coworkers have already gotten started, so let's clone the repository and get familiar with the app.

### TODO Instructions to clone the app and get up and running
- include db:setup to setup seed data
- TODO short video explaining terminal, app, rails commands, rails console, generators, database, database gui

### Reading data with ActiveRecord
A core library in the Rails framework called ActiveRecord is responsible for the configuration code that allows us to interact with data in the database using Ruby classes. (We'll talk more about Ruby classes in future lessons, but they are similar to Javascript classes or objects.) Let's see how ActiveRecord works.

Each of our tabs from the spreadsheet is now a table in our database, and each is mapped to a Ruby class. Class names in Ruby are singular and Pascal case (a special type of [camel case](https://developer.mozilla.org/en-US/docs/Glossary/Camel_case)), while table names are plural and [snake case](https://developer.mozilla.org/en-US/docs/Glossary/Snake_case). ActiveRecord and Rails depend on this naming convention
to work properly. We'll learn more about this later.

Look in the `app/models/` directory. Each file here is an ActiveRecord model -- a Ruby class that is associated with a table in the database.

In a terminal, start the rails console.

```
bundle exec rails c
```

In the prompt, type `Trimester.last` and hit enter. 

```
  Trimester Load (1.6ms)  SELECT "trimesters".* FROM "trimesters" ORDER BY "trimesters"."id" DESC LIMIT 1 /*application='DocRails'*/
=>
#<Trimester:0x0000000121db9bc0
 id: 9,
 year: "2025",
 term: "Fall",
 application_deadline: "2025-08-15",
 start_date: "2025-09-01",
 end_date: nil,
 created_at: "2025-01-01 19:21:16.044837000 +0000",
 updated_at: "2025-01-01 19:21:16.044837000 +0000">
```

If we look back at our spreadsheet, we'll see that this displays the data from the last row in our spreadsheet. Now type `Trimester.first` in the command prompt and hit enter. We'll see that the data displayed here matches the first row in our spreadsheet. Now try `Trimester.all`. This should print all rows from the spreadsheet.

- `Trimester` is the model or Ruby class that is configured by Rails to map to the database table
`trimesters`. (Analogously, we have models `CodingClass`, `Course`, `Student`, `Enrollment`, which map to tables named `coding_classes`, `courses`, `students`, `enrollments`, etc.)
- The methods `first`, `last` and `all` are ActiveRecord methods called "finder methods". You can find these methods listed in this (section of the Rails Guides)[https://guides.rubyonrails.org/active_record_basics.html#read] Let's try some other methods mentioned in that section.

## Lesson 1 Assignment - Question 3 (TODO REVISIT)
Let's see how we can retrieve the data in Question 1 using ActiveRecord.

Try this in the rails console prompt:
```
CodingClass.find_by({ title: 'Intro to Programming' })
```

This is our first bit of Ruby, so let's take a minute to understand what we've written.
- `CodingClass` is a Ruby class
- `find_by` is a method on `CodingClass`, and we are calling the method with the dot operator. You likely learned to use the dot operator to access attributes and call methods in Javascript, so hopefully this syntax is familiar.
- `{ title: 'Intro to Programming' }` is a Ruby hash, and it's very similar to an object literal in Javascript. A Ruby hash is a collection of key, value pairs. There is one key called `title`, and the corresponding value is a string 'Intro to Programming'. In Javascript, keys are strings, while in Ruby, keys may be strings, but they may also be a Ruby datatype called a symbol. We may discuss symbols in more detail later, but for now, it's enough know that symbols are similar to strings, and they are frequently used as keys in a hash.

Let's continue gathering the data we need. We want to get the id of the upcoming trimester, so that we can use that id to find the courses scheduled in that trimester.

```
Trimester.find_by(year: '2025', term: 'Fall')
```

Now we have the data we need to get the list of Fall 2025 courses. See if you can figure out an ActiveRecord query that displays the list of `Course` records that belong to the coding class and trimester output from the above queries. Execute that query in the command prompt and check the output with your answer from Question 1. Include the ActiveRecord query as your answer to this question in your assignment.


